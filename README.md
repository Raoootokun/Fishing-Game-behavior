# 釣り大会 仕様書
---
# 基本ルール
- 300秒間、釣りをし、釣った魚の合計ポイントを競います。

## スコアボード
- fg_point ... ポイント管理に使用

## タグ
- タグは状態取得用です。(詳しくは # 注意・禁止事項 を参照)

  - fg_join ... 参加状態
  - fg_play ... プレイ状態
  - [No Tag] ... 非参加状態



# ゲーム進行
## 1. 初期化
- `概要`: オブジェクトの初期化・作成、各魚のポイントの初期化。  
- `実行条件`: ワールド作成時。  
- `コマンド: `/function fishinggame/init`

## 2. 参加
- `概要`: プレイヤーを **参加状態** にします。  
- `詳細`: タグ(`fg_join`)を付与、参加メッセージを通知。    
- `実行条件`: プレイヤーが**非参加状態**である。  
- `コマンド`: `/function fishinggame/join`(プレイヤー自身が実行)  

## 3. 開始
- `概要`: ゲームを開始。プレイヤーを **プレイ状態** にします。  
- `詳細`: タグ(`fg_join`)を削除、タグ(`fg_play`)を・釣り竿を付与、ポイントを初期化、開始メッセージを通知。**300**のタイマー始動。      
- `実行条件`: プレイヤーが**参加状態**である。  
- `コマンド`: `/function fishinggame/join` (プレイヤー自身が実行)  

## 4. ポイント加算
- `概要`: 釣れたアイテムに応じたポイントを追加します。
- `詳細`: [ポイント](#2-ポイント一覧)を追加、釣れたアイテムの回収・加算ポイントを通知。
- `実行条件`: プレイヤーがアイテムを釣ったとき。
- `コマンド`: --

## 5. 終了
- `概要`: ゲームを終了。プレイヤーを **参加状態** にします。 
- `詳細`: タグ(`fg_play`)を削除、釣り竿を回収、終了メッセージを通知。
- `実行条件`: タイマーが**0**のとき。
- `コマンド`: --

## 6. 退出
- `概要`: プレイヤーを **非参加状態** にします。  
- `詳細`: タグ(`fg_play`・`fg_join`)を削除、釣り竿を回収、退出メッセージを通知。
- `実行条件`: プレイヤーが**参加状態**/**プレイ状態**である。  
- `コマンド`: `/function fishinggame/exit` (プレイヤー自身が実行)



# ワールド退出/死亡時の処理
ワールド退出/死亡した際は 退出判定 となります。  
ワールド参加時/リスポーン時に [退出処理](#2-退出) が実行されます。

 

# 注意・禁止事項
タグはコマンド側で状態を確認する用です。 
状態の変更はScriptAPIで処理します。    
コマンドで タグ(fg_join、fg_play) を付与/削除しないこと。エラーで処理が止まる可能性があります。  
ゲームを中断する場合は ## 91. 退出 から行ってください。  



# ポイント

## ポイント変更
- `概要`: フォームから各魚のポイントを変更できます。
- `コマンド`: `/function fishinggame/setting`

## ポイント一覧
(デフォルトのポイント)
| 魚 |確率(%)| ポイント |
|----|----|----|
| タラ | 50 | 10 |
| サケ | 30 | 15 |
| カクレクマノミ | 15 | 25 |
| フグ | 5 | 30 |
| その他 | null | 0 |





# 開発メモ

[] 魚以外のアイテムの削除
[x] プレイサウンド
[] 釣りの耐久値問題
[] 釣った各魚の総数・総ポイント、プレイ回数、プレイ時間の記録

変更前
-------- 確率(%) / ポイント ------- 
タラ  |    60    |    10
サケ  |    25    |    15
熱帯魚|    2     |    25
フグ  |    13    |    30
-----------------------------------

変更後
-------- 確率(%) / ポイント ------- 
タラ  |    50    |    10
サケ  |    30    |    15
熱帯魚|    15    |    25
フグ  |    5    |    30
-----------------------------------
